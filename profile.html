<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>個人檔案 | FlowBoard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="asset/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* 頁面未準備好前隱藏主內容，防止閃爍 */
        #main-app { display: none !important; }
        .auth-ready #main-app { display: block !important; }
    </style>
</head>
<body class="bg-black text-white antialiased">

    <div id="main-app" class="min-h-screen">
        <div class="max-w-7xl mx-auto flex justify-center">
            
            <aside class="w-20 lg:w-72 h-screen sticky top-0 p-4 flex flex-col border-r border-zinc-800">
                <div class="text-3xl font-black italic mb-10 px-4 hidden lg:block tracking-tighter">FlowBoard</div>
                <nav class="nav-container flex-1">
                    <div class="nav-item" onclick="location.href='index.html'">
                        <i class="fa-solid fa-house"></i><span>首頁</span>
                    </div>
                    <div class="nav-item active" onclick="location.href='profile.html'">
                        <i class="fa-solid fa-user"></i><span>個人檔案</span>
                    </div>
                </nav>
                <div class="mt-auto pt-4 border-t border-zinc-900">
                    <div id="user-display" class="px-4 text-[10px] font-bold text-zinc-600 uppercase mb-4 truncate"></div>
                    <div class="nav-item" onclick="handleLogout()">
                        <i class="fa-solid fa-right-from-bracket"></i><span>登出</span>
                    </div>
                </div>
            </aside>

            <main class="w-full max-w-2xl border-r border-zinc-800 min-h-screen">
                <header class="sticky top-0 bg-black/60 backdrop-blur-xl p-4 border-b border-zinc-800 z-40 flex items-center gap-4">
                    <button onclick="location.href='index.html'" class="hover:bg-zinc-900 w-9 h-9 rounded-full flex items-center justify-center transition-colors">
                        <i class="fa-solid fa-arrow-left"></i>
                    </button>
                    <h2 class="text-xl font-black tracking-tight">個人檔案</h2>
                </header>

                <section class="border-b border-zinc-800">
                    <div class="h-32 bg-zinc-900"></div> <div class="px-6 pb-6">
                        <div class="relative flex justify-between items-end -mt-12 mb-4">
                            <div class="w-24 h-24 rounded-full bg-black p-1">
                                <div class="w-full h-full rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center overflow-hidden">
                                    <i class="fa-solid fa-user-ninja text-4xl text-zinc-600"></i>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h1 id="profile-name" class="text-2xl font-black italic">載入中...</h1>
                            <p id="profile-handle" class="text-zinc-500 font-medium">@username</p>
                        </div>
                    </div>
                    
                    <div class="flex border-b border-zinc-800 mt-4">
                        <div class="flex-1 text-center py-4 font-bold border-b-4 border-blue-500">貼文</div>
                        <div class="flex-1 text-center py-4 font-bold text-zinc-500 hover:bg-zinc-900 cursor-not-allowed">回覆</div>
                        <div class="flex-1 text-center py-4 font-bold text-zinc-500 hover:bg-zinc-900 cursor-not-allowed">喜歡</div>
                    </div>
                </section>

                <div id="user-posts"></div>
            </main>

            <aside class="w-80 p-6 hidden lg:block">
                <div class="bg-zinc-900/50 rounded-2xl p-4 border border-zinc-800">
                    <h3 class="font-black text-xl mb-4 italic">推薦追蹤</h3>
                    <p class="text-zinc-500 text-sm">暫無建議</p>
                </div>
            </aside>
        </div>
    </div>

    <div id="initial-loader" class="fixed inset-0 bg-black z-[9999] flex flex-col items-center justify-center">
        <div class="w-10 h-10 border-4 border-zinc-800 border-t-white rounded-full animate-spin mb-4"></div>
        <p class="text-zinc-500 text-xs font-medium tracking-widest uppercase">載入檔案中</p>
    </div>

    <script src="js/index.js"></script>
</body>
</html>